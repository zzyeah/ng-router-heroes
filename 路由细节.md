### 知识点
- 路由模块分为总路由模块和子路由模块
- 路由配置
- CanActivate 守卫（检查路由访问）
- CanActivateChild 守卫（检查子路由访问）。
- CanDeactivate 守卫（在放弃未保存的更改之前请求许可）。
- Resolve 守卫（预先获取路由数据）。
- 惰性加载 NgModule 。
- CanLoad 守卫（在加载功能模块的文件之前检查）。

### 路由模块 
需要明确的是创建路由模块的命令行
- `ng g module moduleName --routing`
- 该命令行直接创建两个文件,`moduleName.module.ts`和`moduleName-routing.module.ts`。

1. 总路由模块一般是app-routing.module.ts
2. 子路由模块一般是在单独类别文件夹中创建的xxx-routing.module.ts
3. 子路由模块不需要插入总路由模块中
4. 子路由模块和总路由模块均放在app.module.ts中(普通情况)，并且imports[]中AppRoutingModule是最后一个,并且位于子路由模块之后

### 路由配置
1. 总路由需要考虑两点:
```ts
{ path: '',   redirectTo: '/heroes', pathMatch: 'full' }, // 重定向
{ path: '**', component: PageNotFoundComponent } // 404
```
   1. 将最初的相对URL('')转换成所需的默认路径: 当输入localhost:8080时,页面跳转到localhost:8080/heroes,这样的情况
   2. 设置404页面跳转: 当跳转到一个未设置路由的路径中,页面无法显示,使页面发生错误。
   
   > 关于这两点的配置: 
   1. redirectTo用于实现第一点功能, pathMatch用于匹配url地址(full表示的是URL地址匹配必须为path,这才能重定向对应路径)
   2. **则为通配符,当地址栏指向无效的URL则指向对应组件

2. 子路由需要考虑的几个点
   1. 需要展示的页面有哪些
   2. 路径是否需要携带参数, 如果需要,在页面跳转的时候需加上参数`[routerLink]="['/路径', 实参]"`

3. ActivatedRoute 实战
```ts
this.hero$ = this.route.paramMap.pipe(
   switchMap((params: ParamMap) =>
   this.service.getHero(params.get('id')!))
);
```
   1. ActivatedRoute用于遍历`RouterState`树并从节点提取信息。
   2. 主要是为了使用paramMap方法,该方法是为了获取URL的param参数
   3. 然后用pipe方法.pipe(switchMap((params)=>{}))
   4. switchMap方法是查看服务请求是否在处理。当用户重新导航到该路由,而服务还在寻找旧的params,SwitchMap会放弃旧的请求然后进行新的params的数据请求
   5. AsyncPipe用于处理Observable的订阅,hero属性将（重新）设置为检索到的英雄。



